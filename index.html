<html>
  <head>
    <title>
      Github Profiles
    </title>
    <link href="./styles/report.css" rel="stylesheet">
  </head>
  <body>

    <form id='add_profile'>
    <input id='username' placeholder="Enter a Github username">
    <button class="load-profile" type="submit">Load profile</button>
    </form>

    <section class="profile-container">
    </section>

    <template id='profile-template'>
      <section class="profile">
        <section class="avatar">
          <img src="{{ avatar_url}}">
        </section>

        <section class="details">
          <h3>
            <a href="{{ html_url}}">
              {{ login }}
            </a>
          </h3>
          <h4>
            Repos: {{public_repos}}
          </h4>
          <h4>
            Followers: {{followers}}
          </h4>
          <a href="#" id="close">x</a>
        </section>
        <br clear="all">
      </section>
    </template>


    <script src='https://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.8.1/mustache.js'></script>
    <script src='https://code.jquery.com/jquery-2.1.1.min.js'></script>
    <script src='key.js'></script>
    <script>
      function addProfile(username) {
        $.get('http://api.github.com/users/'+ username + '?' + 'client_id=' + client_id + '&client_secret=' + client_secret, function(user){
          var newProfile = Mustache.render($('#profile-template').html(), user);
          $(newProfile).appendTo('.profile-container').slideDown();
        })
      };

      $(document).ready(function(){

        $(".load-profile").on('click',function(event){
          event.preventDefault();
          addProfile($('#username').val());
          });

      });
    </script>


  </body>
</html>
